@model Training1.Models.Product

@{
    ViewData["Title"] = "Details";
}

<h1>@Html.DisplayFor(model => model.Name)</h1>

<div>
    <ul class="nav nav-tabs">
        <li class="nav-item active">
            <a class="nav-link active bg-primary" data-toggle="tab" href="#details">Details</a>
        </li>
        @if ((await AuthorizationService.AuthorizeAsync(
          User, new Stock(),
          UserOperations.Read)).Succeeded)
        {
            <li class="nav-item">
                <a class="nav-link bg-primary" data-toggle="tab" href="#stock">Stock</a>
            </li>
        }
    </ul>

    <div id="myTabContent" class="tab-content">
        <div class="tab-pane fade show active" id="details">
            <dl class="row">
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Name)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Name)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Category)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Category)
                </dd>
                <dt class="col-sm-2">
                    @Html.DisplayNameFor(model => model.Description)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Description)
                </dd>
            </dl>

            <div>
                <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
                <a asp-action="Index">Back to List</a>
            </div>
        </div>

        @if ((await AuthorizationService.AuthorizeAsync(
             User, new Stock(),
             UserOperations.Read)).Succeeded)
        {
            <div class="tab-pane fade show" id="stock">
                @await Component.InvokeAsync("StockList", new { productId = Model.Id })
            </div>
        }
    </div>
</div>


@section Scripts{
    <script>
        $(function () {
            debugger            
            var showStock = @(ViewBag.ShowStock.ToString().ToLower());
            if (showStock) {
                $('a[href="#stock"]').tab('show');
            }
        });
    </script>
}
